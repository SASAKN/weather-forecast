<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SVG Trimmer</title>
<style>
  #svg-container {
    width: 100%;
    height: 500px; /* SVG表示領域の高さを設定 */
    position: relative;
    overflow: hidden; /* SVGを表示領域内に制限 */
  }
  #selection-rectangle {
    position: absolute;
    border: 2px dashed red;
    pointer-events: none; /* 選択範囲の四角形がマウスイベントを妨げないようにする */
    display: none; /* 初期状態では非表示 */
  }
</style>
</head>
<body>
<input type="file" accept=".svg" onchange="handleFileSelect(event)">
<div id="svg-container">
  <!-- SVGを表示する領域 -->
  <svg id="svg-content" xmlns="http://www.w3.org/2000/svg" width="500" height="500">
    <!-- SVG内容 -->
    <!-- ここにSVGファイルの内容を貼り付ける -->
  </svg>
  <div id="selection-rectangle"></div>
</div>
<script>
  // SVGをトリミングする関数
  function trimSVG(svg) {
    const bbox = svg.getBBox(); // SVGのバウンディングボックスを取得
    svg.setAttribute('viewBox', `${bbox.x} ${bbox.y} ${bbox.width} ${bbox.height}`);
  }

  // 選択範囲の四角形を表示する関数
  function showSelectionRect(event) {
    const rect = document.getElementById('selection-rectangle');
    rect.style.display = 'block';
    const mouseX = event.clientX - rect.offsetParent.offsetLeft;
    const mouseY = event.clientY - rect.offsetParent.offsetTop;
    rect.style.left = mouseX + 'px';
    rect.style.top = mouseY + 'px';
  }

  // ファイルが選択されたときにSVGを読み込む関数
  function handleFileSelect(event) {
    const file = event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(event) {
      const svgData = event.target.result;
      renderSVG(svgData);
    };
    reader.readAsText(file);
  }

  // 選択されたSVGを表示する関数
  function renderSVG(svgData) {
    const svgContainer = document.getElementById('svg-container');
    const svgContent = document.getElementById('svg-content');
    svgContent.innerHTML = svgData;
    trimSVG(svgContent); // SVGをトリミング
    svgContainer.addEventListener('mousemove', showSelectionRect); // 選択範囲の四角形を表示
  }
</script>
</body>
</html>
